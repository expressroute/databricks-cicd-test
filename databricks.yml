variables:
  project_name:
    default: "dba-cicd"

  env:
    default: "dev"

  catalog:
    default: "hen_db"

  schema:
    default: "stg"

  sql_warehouse_id:
    default: "da5b802f429182bb"

bundle:
  name: "dba-cicd"

workspace:
  root_path: "/Shared/dev/${var.project_name}"

targets:
  dev:
    variables:
      env: "dev"
      catalog: "hen_db"
      schema: "stg"
      sql_warehouse_id: "da5b802f429182bb"
    workspace:
      root_path: "/Shared/dev/${var.project_name}"

  prd:
    variables:
      env: "prd"
      catalog: "hen_db"
      schema: "prd"
      sql_warehouse_id: "da5b802f429182bb"
    workspace:
      root_path: "/Shared/prd/${var.project_name}"

resources:
  jobs:
    apply_sql:
      name: "create_sql_objects_${var.env}"
      tasks:
        - task_key: create_customers_table
          sql_task:
            query: "sql/tables/customers.sql"
            warehouse_id: "${var.sql_warehouse_id}"
